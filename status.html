<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ÿßÿÆÿ®ÿßÿ± Ÿà ÿßÿ∑ŸÑÿßÿπ€åŸá‚ÄåŸáÿß</title>
    <style>
      :root {
        --primary-color: #00ae70;
        --primary-dark: #089863;
        --bg-color: #f4fbf7;
        --text-color: #222;
        --card-bg: #ffffff;
        --header-text: #ffffff;
        --border-radius: 0.75rem;
        --shadow-color-light: rgba(0, 174, 112, 0.07);
        --shadow-color-medium: rgba(0, 174, 112, 0.12);

        /* State Colors */
        --success-bg: #eafff4;
        --danger-bg: #fff0f3;
        --danger-border: #ff0040;
        --warning-bg: #fffde0;
        --warning-border: #ffd600;
        --orange-bg: #fff6e5;
        --orange-border: #ffa500;
      }

      @font-face {
        font-family: "Vazirmatn";
        src: url("/assets/fonts/Vazirmatn[wght].ttf") format("truetype");
        font-weight: 100 900;
        font-display: swap;
      }

      *,
      *::before,
      *::after {
        font-family: "Vazirmatn", sans-serif;
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background-color: var(--bg-color);
        color: var(--text-color);
        direction: rtl;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      /* == Main Layout & Typography == */
      main {
        flex-grow: 1;
        padding: 1.5rem;
        max-width: 1100px;
        width: 100%;
        margin: 0 auto;
      }

      .main-content {
        line-height: 1.8; /* Improved readability */
      }

      h2 {
        font-size: 1.3rem;
        margin-bottom: 1.5rem;
        color: var(--primary-color);
        text-align: center;
        font-weight: 700;
      }

      ul {
        list-style: none;
      }

      a {
        text-decoration: none;
        color: var(--primary-color);
        font-weight: 600;
        font-size: 1.1rem;
        display: block;
        transition: color 0.2s;
      }

      a:hover {
        color: var(--primary-dark);
      }

      /* == Components: News Cards & Links == */
      li,
      .news-alert-box {
        background-color: var(--card-bg);
        border-radius: var(--border-radius);
        padding: 1.2rem 1.5rem;
        margin-bottom: 1.2rem;
        box-shadow: 0 2px 12px var(--shadow-color-light);
        border-inline-start: 4px solid var(--primary-color);
        transition: transform 0.25s, border-inline-start-color 0.25s,
          box-shadow 0.25s;
      }

      li:hover {
        transform: translateY(-3px);
        border-inline-start-color: var(--primary-dark);
        box-shadow: 0 6px 20px var(--shadow-color-medium);
      }

      .news-alert-box {
        font-size: 1rem;
      }

      .news-alert-box.green {
        background-color: var(--success-bg);
        border-inline-start-color: var(--primary-color);
      }
      .news-alert-box.yellow {
        background-color: var(--warning-bg);
        border-inline-start-color: var(--warning-border);
      }
      .news-alert-box.red {
        background-color: var(--danger-bg);
        border-inline-start-color: var(--danger-border);
      }
      .news-alert-box.orange {
        background-color: var(--orange-bg);
        border-inline-start-color: var(--orange-border);
      }

      .back-link {
        display: block;
        margin-top: 2rem;
        text-align: center;
      }

      /* == Responsive Media Queries == */
      @media (max-width: 480px) {
        main {
          padding: 1rem;
        }
        a {
          font-size: 1rem;
        }
        li,
        .news-alert-box {
          padding: 1rem 1.2rem;
        }
      }
    </style>
  </head>
  <body>
    <div id="header-placeholder"></div>
    <main>
      <div class="main-content">
        <div class="column column-info">
          <div id="news-alerts-page"></div>
        </div>
        <a href="/index.html" class="back-link">üè† ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ÿµŸÅÿ≠Ÿá ÿßÿµŸÑ€å</a>
      </div>
    </main>
    <div id="footer-placeholder"></div>
    <script src="/js/app.js"></script>
    <script>
      async function loadAndDisplayNewsAlerts() {
        const newsAlertsDiv = document.getElementById("news-alerts-page");
        if (!newsAlertsDiv) return;
        newsAlertsDiv.innerHTML = "ÿØÿ± ÿ≠ÿßŸÑ ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ∑ŸÑÿßÿπ€åŸá‚ÄåŸáÿß...";

        try {
          const response = await fetch("data/news-alerts.json");
          if (!response.ok)
            throw new Error(`HTTP error! status: ${response.status}`);
          const alerts = await response.json();
          let html = "";
          if (alerts.length === 0) {
            html = `<div class="news-alert-box green">ÿØÿ± ÿ≠ÿßŸÑ ÿ≠ÿßÿ∂ÿ± ÿßÿ∑ŸÑÿßÿπ€åŸá ÿ¨ÿØ€åÿØ€å Ÿàÿ¨ŸàÿØ ŸÜÿØÿßÿ±ÿØ.</div>`;
          } else {
            alerts.forEach((alert) => {
              const colorClass = alert.color;
              let startDateTimeInfo = "";
              if (alert.startDate && alert.startTime) {
                startDateTimeInfo = `<p style="font-size:0.9em; color:#666; margin-top:5px; margin-bottom:0;">ÿ¥ÿ±Ÿàÿπ: ${toPersianDigits(
                  alert.startDate
                )} ÿ≥ÿßÿπÿ™ ${toPersianDigits(alert.startTime)}</p>`;
              }
              let endDateTimeInfo = "";
              if (alert.endDate && alert.endTime) {
                endDateTimeInfo = `<p style="font-size:0.9em; color:#666; margin-top:5px; margin-bottom:0;">Ÿæÿß€åÿßŸÜ: ${toPersianDigits(
                  alert.endDate
                )} ÿ≥ÿßÿπÿ™ ${toPersianDigits(alert.endTime)}</p>`;
              }
              html += `
                    <div class="news-alert-box ${colorClass}">
                        <b>${alert.title}</b>
                        ${
                          alert.description
                            ? `<p style="margin-top: 8px; margin-bottom: 0;">${alert.description}</p>`
                            : ""
                        }
                        ${startDateTimeInfo}
                        ${endDateTimeInfo}
                    </div>
                `;
            });
          }
          newsAlertsDiv.innerHTML = html;
        } catch (error) {
          console.error("Could not fetch news alerts:", error);
          newsAlertsDiv.innerHTML = `<div class="news-alert-box red">ÿÆÿ∑ÿß ÿØÿ± ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿßÿ∑ŸÑÿßÿπ€åŸá‚ÄåŸáÿß.</div>`;
        }
      }
      if (document.getElementById("news-alerts-page")) {
        loadAndDisplayNewsAlerts();
      }
    </script>
  </body>
</html>
